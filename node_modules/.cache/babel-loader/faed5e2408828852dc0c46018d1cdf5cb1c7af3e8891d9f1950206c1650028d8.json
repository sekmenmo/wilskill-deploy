{"ast":null,"code":"var _jsxFileName = \"/Users/mertsekmen/Desktop/wilskills-event-webapp/wilskill-app/src/Pages/Account.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { UserAuth } from \"../context/AuthContext\";\nimport { useState } from \"react\";\nimport { storage } from \"../config\";\nimport { ref, uploadBytes } from \"firebase/storage\";\nimport { useFetch } from \"../Pages/useFetch\";\nimport Axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Account = () => {\n  _s();\n  const [waiverUpload, setWaiverUpload] = useState(null);\n  const [isUploaded, setIsUploaded] = useState(false);\n  const {\n    user\n  } = UserAuth();\n  const {\n    data: userInfo\n  } = useFetch(`http://localhost:3001/users/getuser/${user.uid}`);\n  const uploadWaiver = () => {\n    if (waiverUpload == null) return;\n    const imageRef = ref(storage, `waivers/${user.displayName}`);\n    uploadBytes(imageRef, waiverUpload).then(() => {\n      alert(\"Waiver uploaded\");\n      // call sql query to update date of latest waiver upload\n      const firebase_ID = user.uid;\n      console.log(firebase_ID);\n      Axios.post(`http://localhost:3001/users/updateWaiverTime/${firebase_ID}`).then(async res => {\n        if (res) {\n          console.log(res);\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n      console.log(\"Update completed\");\n      setIsUploaded(true);\n    });\n  };\n  let latestWaiverUpload = \"\";\n  userInfo.map(userInfo => latestWaiverUpload = userInfo.latest_waiver);\n  console.log(latestWaiverUpload);\n  if (latestWaiverUpload != \"\" && latestWaiverUpload != null) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center text-2xl font-bold py-4\",\n      children: \"Account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center\",\n      children: [\"Welcome, \", user === null || user === void 0 ? void 0 : user.displayName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center\",\n      children: [\"Most Recent Waiver Uploaded on:\", \" \", new Date(latestWaiverUpload).toLocaleDateString(\"en-US\")]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this), !isUploaded && /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: event => {\n        setWaiverUpload(event.target.files[0]);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }, this), !isUploaded && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"bg-[#FDCB6E] hover:bg-[#9e7f44] text-black font-bold py-1 px-2 mx-3 rounded-full\",\n      onClick: uploadWaiver,\n      children: \"Upload Waiver\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }, this), isUploaded && /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center text-xl font-bold\",\n      children: \"You have uploaded your waiver!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 7\n  }, this);else return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center text-2xl font-bold py-4\",\n      children: \"Account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center\",\n      children: [\"Welcome, \", user === null || user === void 0 ? void 0 : user.displayName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this), !isUploaded && /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: event => {\n        setWaiverUpload(event.target.files[0]);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }, this), !isUploaded && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"bg-[#FDCB6E] hover:bg-[#9e7f44] text-black font-bold py-1 px-2 mx-3 rounded-full\",\n      onClick: uploadWaiver,\n      children: \"Upload Waiver\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }, this), isUploaded && /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center text-xl font-bold\",\n      children: \"You have uploaded your waiver!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 7\n  }, this);\n};\n_s(Account, \"zCv8e9C8RPdnPSGKh+8oui+M9ho=\", false, function () {\n  return [useFetch];\n});\n_c = Account;\nexport default Account;\nvar _c;\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"names":["React","UserAuth","useState","storage","ref","uploadBytes","useFetch","Axios","Account","waiverUpload","setWaiverUpload","isUploaded","setIsUploaded","user","data","userInfo","uid","uploadWaiver","imageRef","displayName","then","alert","firebase_ID","console","log","post","res","catch","error","latestWaiverUpload","map","latest_waiver","Date","toLocaleDateString","event","target","files"],"sources":["/Users/mertsekmen/Desktop/wilskills-event-webapp/wilskill-app/src/Pages/Account.jsx"],"sourcesContent":["import React from \"react\";\nimport { UserAuth } from \"../context/AuthContext\";\nimport { useState } from \"react\";\nimport { storage } from \"../config\";\nimport { ref, uploadBytes } from \"firebase/storage\";\nimport { useFetch } from \"../Pages/useFetch\";\nimport Axios from \"axios\";\n\nconst Account = () => {\n  const [waiverUpload, setWaiverUpload] = useState(null);\n  const [isUploaded, setIsUploaded] = useState(false);\n  const { user } = UserAuth();\n  const { data: userInfo } = useFetch(\n    `http://localhost:3001/users/getuser/${user.uid}`\n  );\n  const uploadWaiver = () => {\n    if (waiverUpload == null) return;\n    const imageRef = ref(storage, `waivers/${user.displayName}`);\n    uploadBytes(imageRef, waiverUpload).then(() => {\n      alert(\"Waiver uploaded\");\n      // call sql query to update date of latest waiver upload\n      const firebase_ID = user.uid;\n      console.log(firebase_ID);\n      Axios.post(`http://localhost:3001/users/updateWaiverTime/${firebase_ID}`)\n        .then(async (res) => {\n          if (res) {\n            console.log(res);\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n      console.log(\"Update completed\");\n      setIsUploaded(true);\n    });\n  };\n\n  let latestWaiverUpload = \"\";\n  userInfo.map((userInfo) => (latestWaiverUpload = userInfo.latest_waiver));\n  console.log(latestWaiverUpload);\n  if (latestWaiverUpload != \"\" && latestWaiverUpload != null)\n    return (\n      <div className=\"text-center\">\n        <h1 className=\"text-center text-2xl font-bold py-4\">Account</h1>\n        <h1 className=\"text-center\">Welcome, {user?.displayName}</h1>\n        <h1 className=\"text-center\">\n          Most Recent Waiver Uploaded on:{\" \"}\n          {new Date(latestWaiverUpload).toLocaleDateString(\"en-US\")}\n        </h1>\n        <br></br>\n        {!isUploaded && (\n          <input\n            type=\"file\"\n            onChange={(event) => {\n              setWaiverUpload(event.target.files[0]);\n            }}\n          />\n        )}\n        {!isUploaded && (\n          <button\n            className=\"bg-[#FDCB6E] hover:bg-[#9e7f44] text-black font-bold py-1 px-2 mx-3 rounded-full\"\n            onClick={uploadWaiver}\n          >\n            Upload Waiver\n          </button>\n        )}\n        {isUploaded && (\n          <h1 className=\"text-center text-xl font-bold\">\n            You have uploaded your waiver!\n          </h1>\n        )}\n      </div>\n    );\n  else\n    return (\n      <div className=\"text-center\">\n        <h1 className=\"text-center text-2xl font-bold py-4\">Account</h1>\n        <h1 className=\"text-center\">Welcome, {user?.displayName}</h1>\n        <br></br>\n        {!isUploaded && (\n          <input\n            type=\"file\"\n            onChange={(event) => {\n              setWaiverUpload(event.target.files[0]);\n            }}\n          />\n        )}\n        {!isUploaded && (\n          <button\n            className=\"bg-[#FDCB6E] hover:bg-[#9e7f44] text-black font-bold py-1 px-2 mx-3 rounded-full\"\n            onClick={uploadWaiver}\n          >\n            Upload Waiver\n          </button>\n        )}\n        {isUploaded && (\n          <h1 className=\"text-center text-xl font-bold\">\n            You have uploaded your waiver!\n          </h1>\n        )}\n      </div>\n    );\n};\n\nexport default Account;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}